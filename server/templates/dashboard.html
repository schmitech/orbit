<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ORBIT Monitoring Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/static/dashboard.css">
</head>
<body class="bg-slate-950 text-slate-100 antialiased">
    <div class="pointer-events-none absolute inset-x-0 top-0 h-72 bg-gradient-to-br from-sky-500/10 via-transparent to-indigo-500/10 blur-3xl -z-10"></div>
    <div class="max-w-7xl mx-auto px-6 py-10 space-y-10">
        <header class="flex flex-col gap-6 md:flex-row md:items-center md:justify-between">
            <div class="space-y-3">
                <p class="text-xs font-medium tracking-[0.32em] text-slate-400 uppercase">Operational Insights</p>
                <h1 class="text-3xl md:text-4xl font-semibold text-slate-100">ORBIT Monitoring Dashboard</h1>
                <p class="text-sm text-slate-400 max-w-2xl">Real-time service health, throughput, and reliability telemetry.</p>
            </div>
            <div class="flex items-center gap-5">
                <div class="flex items-center gap-3 rounded-full border border-slate-800 bg-slate-900/60 px-5 py-3 shadow-lg shadow-slate-900/30">
                    <span id="status-indicator" class="status-dot bg-emerald-400/80 pulse"></span>
                    <div class="flex flex-col">
                        <span id="status-text" class="text-sm font-medium text-slate-100">Connected</span>
                        <span class="text-xs text-slate-400">WebSocket Stream</span>
                    </div>
                </div>
                <div class="text-xs text-slate-500 text-right">
                    Last Update
                    <div id="last-update" class="text-sm font-semibold text-slate-200">Never</div>
                </div>
            </div>
        </header>

        <section class="grid gap-6 md:grid-cols-2 xl:grid-cols-4">
            <article class="surface-card metric-card p-6">
                <div class="flex items-start justify-between">
                    <div class="space-y-2">
                        <span class="metric-label">CPU Usage</span>
                        <div class="metric-value"><span id="cpu-usage">0</span><span class="metric-unit">%</span></div>
                    </div>
                    <svg class="w-10 h-10 text-sky-400/80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"/>
                    </svg>
                </div>
                <div class="mt-6 space-y-2">
                    <div class="flex items-center justify-between text-xs text-slate-400">
                        <span>Utilization</span>
                        <span id="cpu-usage-label" class="text-slate-200 font-medium">0%</span>
                    </div>
                    <div class="progress-track">
                        <div id="cpu-usage-bar" class="progress-bar bg-sky-500/80" style="width: 0%;"></div>
                    </div>
                </div>
            </article>

            <article class="surface-card metric-card p-6">
                <div class="flex items-start justify-between">
                    <div class="space-y-2">
                        <span class="metric-label">Memory Usage</span>
                        <div class="metric-value"><span id="memory-usage">0</span><span class="metric-unit">GB</span></div>
                    </div>
                    <svg class="w-10 h-10 text-emerald-400/80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 17v1a1 1 0 001 1h4a1 1 0 001-1v-1m3-2V10a2 2 0 00-2-2H8a2 2 0 00-2 2v5m3-2h6"/>
                    </svg>
                </div>
                <div class="mt-6 space-y-4">
                    <div class="progress-track">
                        <div id="memory-usage-bar" class="progress-bar bg-emerald-400/80" style="width: 0%;"></div>
                    </div>
                    <div class="grid grid-cols-2 gap-4 text-xs text-slate-400">
                        <div>
                            <p class="uppercase tracking-[0.15em]">Utilization</p>
                            <p class="text-sm font-semibold text-slate-200"><span id="memory-percent">0</span>%</p>
                        </div>
                        <div>
                            <p class="uppercase tracking-[0.15em]">Status</p>
                            <p id="memory-health" class="text-sm font-semibold text-emerald-300">Stable</p>
                        </div>
                    </div>
                </div>
            </article>

            <article class="surface-card metric-card p-6">
                <div class="flex items-start justify-between">
                    <div class="space-y-2">
                        <span class="metric-label">Throughput</span>
                        <div class="metric-value"><span id="requests-per-second">0</span><span class="metric-unit">rps</span></div>
                    </div>
                    <svg class="w-10 h-10 text-amber-300/90" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                </div>
                <div class="mt-6 space-y-3 text-xs text-slate-400">
                    <div class="flex items-center justify-between">
                        <span>Total Requests</span>
                        <span id="total-requests" class="text-sm text-slate-200 font-medium">0</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span>Error Rate</span>
                        <span id="requests-error-rate" class="text-sm text-slate-200 font-medium">0%</span>
                    </div>
                </div>
            </article>

            <article class="surface-card metric-card p-6">
                <div class="flex items-start justify-between">
                    <div class="space-y-2">
                        <span class="metric-label">Reliability</span>
                        <div class="metric-value"><span id="error-rate">0</span><span class="metric-unit">%</span></div>
                    </div>
                    <svg class="w-10 h-10 text-slate-300/80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
                <div class="mt-6 space-y-3">
                    <div class="flex items-center justify-between text-xs text-slate-400">
                        <span>Status</span>
                        <span id="reliability-status" class="text-sm font-semibold text-emerald-300 uppercase tracking-[0.18em]">Nominal</span>
                    </div>
                    <div class="progress-track">
                        <div id="error-rate-bar" class="progress-bar" style="width: 0%;"></div>
                    </div>
                    <div class="flex items-center justify-between text-xs text-slate-400">
                        <span>Uptime</span>
                        <span id="uptime" class="text-sm font-medium text-slate-200">0m</span>
                    </div>
                </div>
            </article>
        </section>

        <section>
            <div class="flex flex-col gap-2 mb-6">
                <h2 class="section-title text-slate-100">Live Signals</h2>
                <p class="section-subtitle">System resources, throughput, and latency trends update as telemetry streams in.</p>
            </div>
            <div id="charts-grid" class="grid grid-cols-1 gap-6 xl:grid-cols-2">
                <article class="surface-card chart-card p-6 h-[320px]">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-slate-100">System Resources</h3>
                        <span class="badge bg-sky-500/10 text-sky-300 border-sky-500/30">CPU &amp; Memory</span>
                    </div>
                    <div class="h-[240px]">
                        <canvas id="system-chart"></canvas>
                    </div>
                </article>
                <article class="surface-card chart-card p-6 h-[320px]">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-slate-100">Request Metrics</h3>
                        <span class="badge bg-amber-400/10 text-amber-200 border-amber-400/30">Throughput</span>
                    </div>
                    <div class="h-[240px]">
                        <canvas id="request-chart"></canvas>
                    </div>
                </article>
                <article class="surface-card chart-card p-6 h-[320px]">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-slate-100">Response Time (ms)</h3>
                        <span class="badge bg-indigo-400/10 text-indigo-200 border-indigo-400/30">Latency</span>
                    </div>
                    <div class="h-[240px]">
                        <canvas id="response-chart"></canvas>
                    </div>
                </article>
                <article id="adapter-status-container" class="surface-card p-6 space-y-4 hidden">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-lg font-semibold text-slate-100">Adapter Health</h3>
                            <p class="text-sm text-slate-400">Circuit breaker states and failure counters.</p>
                        </div>
                        <span class="badge bg-emerald-400/10 text-emerald-200 border-emerald-400/30">Resilience</span>
                    </div>
                    <div id="adapter-status" class="space-y-3">
                        <p class="text-sm text-slate-400">Loading adapter status...</p>
                    </div>
                </article>
            </div>
        </section>

        <section id="datasource-pool-section" class="surface-card p-6 hidden">
            <div class="flex flex-col gap-2 mb-6">
                <h2 class="section-title text-slate-100">Datasource Connection Pool</h2>
                <p class="section-subtitle">Shared database connections reduce memory footprint and prevent connection exhaustion.</p>
            </div>
            <div class="grid gap-6 md:grid-cols-2 xl:grid-cols-4 mb-6">
                <article class="surface-card p-5 space-y-3" style="background: rgba(15, 23, 42, 0.5);">
                    <div class="flex items-center justify-between">
                        <span class="metric-label">Pooled Datasources</span>
                        <svg class="w-8 h-8 text-cyan-400/80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"/>
                        </svg>
                    </div>
                    <div class="text-3xl font-semibold text-cyan-300" id="pool-total-datasources">0</div>
                    <div class="text-xs text-slate-400">Active connections</div>
                </article>
                <article class="surface-card p-5 space-y-3" style="background: rgba(15, 23, 42, 0.5);">
                    <div class="flex items-center justify-between">
                        <span class="metric-label">Total References</span>
                        <svg class="w-8 h-8 text-violet-400/80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/>
                        </svg>
                    </div>
                    <div class="text-3xl font-semibold text-violet-300" id="pool-total-references">0</div>
                    <div class="text-xs text-slate-400">Adapter references</div>
                </article>
                <article class="surface-card p-5 space-y-3" style="background: rgba(15, 23, 42, 0.5);">
                    <div class="flex items-center justify-between">
                        <span class="metric-label">Pooling Efficiency</span>
                        <svg class="w-8 h-8 text-emerald-400/80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <div class="text-3xl font-semibold text-emerald-300"><span id="pool-efficiency">0</span><span class="text-xl text-slate-400 ml-1">%</span></div>
                    <div class="text-xs text-slate-400">Connection reuse rate</div>
                </article>
                <article class="surface-card p-5 space-y-3" style="background: rgba(15, 23, 42, 0.5);">
                    <div class="flex items-center justify-between">
                        <span class="metric-label">Memory Savings</span>
                        <svg class="w-8 h-8 text-amber-400/80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                        </svg>
                    </div>
                    <div class="text-3xl font-semibold text-amber-300" id="pool-memory-saved">0 MB</div>
                    <div class="text-xs text-slate-400">Est. via pooling</div>
                </article>
            </div>
            <div id="datasource-connections" class="space-y-3">
                <p class="text-sm text-slate-400">Loading datasource pool status...</p>
            </div>
        </section>

        <section class="surface-card p-6">
            <div class="flex flex-col gap-2 mb-6">
                <h2 class="section-title text-slate-100">Thread Pool Utilization</h2>
                <p class="section-subtitle">Monitor executor saturation to stay ahead of queue buildup and latency drift.</p>
            </div>
            <div id="thread-pools" class="grid gap-4 md:grid-cols-2 xl:grid-cols-3">
                <p class="text-sm text-slate-400">Loading thread pool status...</p>
            </div>
        </section>
    </div>

    <script src="/static/dashboard.js"></script>
</body>
</html>