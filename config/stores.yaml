# Store layer configuration for ORBIT system
# This file configures the unified storage layer that separates storage concerns from business logic

# Store manager configuration
store_manager:
  enabled: true
  cleanup_interval: 300  # 5 minutes
  ephemeral_max_age: 3600  # 1 hour
  auto_cleanup: true

# Vector stores configuration
vector_stores:
  # ChromaDB configuration
  chroma:
    enabled: true
    connection_params:
      persist_directory: "./chroma_db"  # Set to null for ephemeral storage
      distance_function: "cosine"  # cosine, l2, ip
      allow_reset: false
      # Note: dimension is dynamically set based on embedding provider
    pool_size: 5
    timeout: 30
    cache_ttl: 1800  # 30 minutes
    ephemeral: false
    auto_cleanup: true

  # Pinecone configuration (if enabled)
  pinecone:
    enabled: false
    connection_params:
      api_key: "${DATASOURCE_PINECONE_API_KEY}"
      # host: "${DATASOURCE_PINECONE_HOST}"  # Only needed for pod-based indexes
      namespace: ""  # Empty string for default namespace
      index_name: "orbit-index"
      # Note: dimension is dynamically set based on embedding provider
    timeout: 30
    cache_ttl: 1800

  qdrant:
    enabled: true
    connection_params:
      # Qdrant Cloud: set DATASOURCE_QDRANT_URL (e.g., https://xxx.cloud.qdrant.io:6333)
      # Self-hosted: set DATASOURCE_QDRANT_HOST and DATASOURCE_QDRANT_PORT
      # The code will use 'url' if set, otherwise falls back to 'host'+'port'
      url: "${DATASOURCE_QDRANT_URL:-}"  # For Qdrant Cloud - leave empty for self-hosted
      host: "${DATASOURCE_QDRANT_HOST:-localhost}"  # For self-hosted - ignored if url is set
      port: "${DATASOURCE_QDRANT_PORT:-6333}"  # For self-hosted - ignored if url is set
      api_key: "${DATASOURCE_QDRANT_API_KEY:-}"
      prefer_grpc: false
      https: false  # For self-hosted only - ignored if url is set
    cache_ttl: 1800

  faiss:
    enabled: false
    connection_params:
      persist_directory: "./faiss_db"
    pool_size: 5
    timeout: 30
    auto_cleanup: true

  weaviate:
    enabled: false
    connection_params:
      url: "${DATASOURCE_WEAVIATE_URL}"
      api_key: "${DATASOURCE_WEAVIATE_API_KEY}"
      # port: 8080 # for local instance
      # grpc_port: 50051 # for local instance
    pool_size: 5
    timeout: 30
    auto_cleanup: true

  milvus:
    enabled: false
    connection_params:
      uri: "./milvus.db"
    pool_size: 5
    timeout: 30
    auto_cleanup: true

  marqo:
    enabled: false
    connection_params:
      url: "http://localhost:8882"
      model: "hf/all_datasets_v4_MiniLM-L6"
    pool_size: 5
    timeout: 30
    cache_ttl: 1800
    ephemeral: false
    auto_cleanup: true

  pgvector:
    enabled: false
    connection_params:
      connection_string: "${DATASOURCE_PGVECTOR_CONNECTION_STRING}"
    pool_size: 5
    timeout: 30
    cache_ttl: 1800
    ephemeral: false
    auto_cleanup: true

  duckdb:
    enabled: false
    connection_params:
      database_path: "./duckdb_db/orbit.duckdb"
      read_only: false
      threads: null
    pool_size: 5
    timeout: 30
    auto_cleanup: true