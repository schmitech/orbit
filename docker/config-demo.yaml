# Minimal Demo Configuration for ORBIT
# This config enables only the simple-chat adapter with local GGUF model inference
# No external API keys required - fully self-contained

import:
  - "adapters.yaml"
  - "inference.yaml"
  - "embeddings.yaml"

general:
  port: 3000
  https:
    enabled: false
  session_id:
    header_name: "X-Session-ID"
    required: true
  inference_provider: "llama_cpp"

language_detection:
  enabled: false  # Disabled for minimal setup

performance:
  workers: 2  # Reduced for demo
  keep_alive_timeout: 30
  thread_pools:
    io_workers: 10
    cpu_workers: 4
    inference_workers: 2
    embedding_workers: 2
    db_workers: 4

fault_tolerance:
  circuit_breaker:
    failure_threshold: 5
    recovery_timeout: 30
    success_threshold: 3
    timeout: 30
    max_recovery_timeout: 300.0
    enable_exponential_backoff: true
  execution:
    strategy: "all"
    timeout: 35
    max_retries: 3
    retry_delay: 1

messages:
  no_results_response: "I'm sorry, but I don't have any specific information about that topic in my knowledge base."

auth:
  session_duration_hours: 12
  default_admin_username: admin
  default_admin_password: ${ORBIT_DEFAULT_ADMIN_PASSWORD:-admin123}
  pbkdf2_iterations: 600000
  credential_storage: file

api_keys:
  header_name: "X-API-Key"
  prefix: "orbit_"

prompt_service:
  cache:
    ttl_seconds: 3600

logging:
  level: "INFO"
  handlers:
    file:
      enabled: true
      directory: "logs"
      filename: "orbit.log"
      max_size_mb: 10
      backup_count: 30
      rotation: "midnight"
      format: "text"
    console:
      enabled: false
      format: "text"
  capture_warnings: true
  propagate: false
  loggers:
    py.warnings:
      level: "ERROR"
      propagate: false
      disabled: true
    inference.clients.llama_cpp:
      level: "ERROR"
    llama_cpp:
      level: "ERROR"
    llama_cpp.llama:
      level: "ERROR"
    ggml:
      level: "ERROR"
    metal:
      level: "ERROR"

clock_service:
  enabled: true
  default_timezone: "America/Toronto"
  format: "%A, %B %d, %Y at %I:%M:%S %p %Z"

internal_services:
  backend:
    type: "sqlite"
    sqlite:
      database_path: "orbit.db"
  
  redis:
    enabled: false  # Disabled for minimal setup

chat_history:
  enabled: true
  collection_name: "chat_history"
  store_metadata: true
  retention_days: 90
  max_tracked_sessions: 10000
  session:
    auto_generate: false
    required: true
    header_name: "X-Session-ID"
  user:
    header_name: "X-User-ID"
    required: false

conversation_threading:
  enabled: false  # Disabled for minimal setup

security:
  cors:
    allowed_origins: ["*"]
    allow_credentials: false
    allowed_methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS", "PATCH"]
    allowed_headers:
      - "Authorization"
      - "Content-Type"
      - "X-API-Key"
      - "X-Session-ID"
      - "X-User-ID"
      - "X-Request-ID"
    expose_headers:
      - "X-Request-ID"
    max_age: 600

  headers:
    enabled: true
    content_security_policy: "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob:; connect-src 'self' ws: wss:; font-src 'self' data:; frame-ancestors 'self'"
    strict_transport_security: "max-age=31536000; includeSubDomains"
    x_content_type_options: "nosniff"
    x_frame_options: "SAMEORIGIN"
    x_xss_protection: "1; mode=block"
    referrer_policy: "strict-origin-when-cross-origin"
    permissions_policy: "geolocation=(), microphone=(), camera=()"

  request_limits:
    max_body_size_mb: 10

  error_handling:
    expose_details: false

